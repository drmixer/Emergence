# Example environment variables for Emergence backend
# Copy this to .env and fill in your values

# Environment
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=info

# Database
DATABASE_URL=postgresql://localhost:5432/emergence

# Redis
REDIS_URL=redis://localhost:6379

# LLM APIs
OPENROUTER_API_KEY=
GROQ_API_KEY=gsk_your-key-here
MISTRAL_API_KEY=
MISTRAL_BASE_URL=https://api.mistral.ai/v1
MISTRAL_SMALL_MODEL=mistral-small-latest

# LLM routing
# LLM_PROVIDER=auto|openrouter|groq|mistral
LLM_PROVIDER=auto
# When using Groq (or when OpenRouter is out of credits), pick:
# llama-3.3-70b (better) or llama-3.1-8b (faster/cheaper)
GROQ_DEFAULT_MODEL=llama-3.1-8b
# Legacy knob for old model_type routing; keep 0.00 with pinned cohort assignments.
GROQ_LIGHTWEIGHT_SHARE=0.00
# Checkpoint action output + format retries (same model only)
LLM_ACTION_MAX_TOKENS=350
LLM_ACTION_PARSE_RETRY_ATTEMPTS=2
# LLM budget and throughput guardrails
OPENROUTER_RPM_LIMIT=6
LLM_DAILY_BUDGET_USD_SOFT=0.50
LLM_DAILY_BUDGET_USD_HARD=1.00
LLM_MAX_CALLS_PER_DAY_TOTAL=2200
LLM_MAX_CALLS_PER_DAY_OPENROUTER_FREE=900
LLM_MAX_CALLS_PER_DAY_GROQ=1800
# Optional Redis key prefix for usage/budget counters
USAGE_BUDGET_KEY_PREFIX=
# Runtime stop conditions
STOP_CONDITION_ENFORCEMENT_ENABLED=true
STOP_PROVIDER_FAILURE_WINDOW_MINUTES=15
STOP_PROVIDER_FAILURE_THRESHOLD=25
STOP_DB_POOL_UTILIZATION_THRESHOLD=0.95
STOP_DB_POOL_CONSECUTIVE_CHECKS=3

# Security
SECRET_KEY=change-this-to-a-random-64-character-string-in-production
# Internal ops/admin API (private)
ADMIN_ENABLED=false
ADMIN_WRITE_ENABLED=false
ADMIN_API_TOKEN=
# Optional comma-separated list; leave blank to disable IP filtering.
ADMIN_IP_ALLOWLIST=

# CORS
FRONTEND_URL=http://localhost:3000

# Simulation settings
AGENT_LOOP_DELAY_SECONDS=150
DAY_LENGTH_MINUTES=60
PROPOSAL_VOTING_HOURS=24
SIMULATION_MAX_AGENTS=50
# Optional run label for llm_usage attribution (if blank, runtime generates one)
SIMULATION_RUN_ID=
# Agent perception delay in seconds (set 0 for immediate visibility)
PERCEPTION_LAG_SECONDS=120
# Runtime ops defaults (can be overridden by /api/admin)
SIMULATION_RUN_MODE=test
SIMULATION_PAUSED=false
FORCE_CHEAPEST_ROUTE=false

# Weekly archive draft generation (draft-only; never auto-publishes)
ARCHIVE_WEEKLY_DRAFT_ENABLED=true
ARCHIVE_WEEKLY_DRAFT_LOOKBACK_DAYS=7
# UTC schedule: Monday=0 ... Sunday=6
ARCHIVE_WEEKLY_DRAFT_WEEKDAY_UTC=0
ARCHIVE_WEEKLY_DRAFT_HOUR_UTC=15
ARCHIVE_WEEKLY_DRAFT_MINUTE_UTC=0
# Backfill window if worker was down at schedule time
ARCHIVE_WEEKLY_DRAFT_GRACE_HOURS=48
# Scheduler polling interval
ARCHIVE_WEEKLY_DRAFT_CHECK_INTERVAL_MINUTES=60
ARCHIVE_WEEKLY_DRAFT_ACTOR=archive-weekly-bot
# Minimum evidence required before creating a new weekly digest draft
ARCHIVE_WEEKLY_DRAFT_MIN_EVENTS=25
ARCHIVE_WEEKLY_DRAFT_MIN_LLM_CALLS=5

# Rate limiting
MAX_ACTIONS_PER_HOUR=20
MAX_PROPOSALS_PER_DAY=3

# Resource defaults
STARTING_FOOD=50
STARTING_ENERGY=50
STARTING_MATERIALS=20

# Twitter Bot (optional - for auto-posting)
TWITTER_API_KEY=
TWITTER_API_SECRET=
TWITTER_ACCESS_TOKEN=
TWITTER_ACCESS_TOKEN_SECRET=
TWITTER_BEARER_TOKEN=

# Twitter Bot Settings
TWITTER_ENABLED=false
TWITTER_MAX_TWEETS_PER_DAY=10
TWITTER_MIN_INTERVAL_MINUTES=30
# Keep quote tweets at ~30% of total by default (3 out of 10/day)
TWITTER_MAX_QUOTES_PER_DAY=3
# Quote auto-post scanner settings
TWITTER_QUOTE_CHECK_INTERVAL_MINUTES=10
TWITTER_QUOTE_LOOKBACK_HOURS=6
TWITTER_MIN_QUOTE_CHARS=60
TWITTER_MAX_QUOTE_CHARS=220
# Quality gate + dedupe settings
TWITTER_MIN_QUOTE_SALIENCE_SCORE=4
TWITTER_QUOTE_DEDUPE_DAYS=14
TWITTER_QUOTE_MAX_TOKEN_OVERLAP=0.85
